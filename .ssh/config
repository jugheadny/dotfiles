Host *
  User rcarroll

  # Ensure the agent forwarding doesn't time out
  ForwardAgent yes
  IdentitiesOnly yes

  # KEY 1: Use your YubiKey No-Touch to get into the VM
  # We bypass the Agent here to avoid the "Error -59" crash
  # IdentityFile "C:\Users\RobertKCarroll\.ssh\id_ed25519_sk_notouch"
  # IdentityAgent none

  # KEY 2: The VM will find this key in your Windows Agent for GitHub
  # This is the "Identity" that gets forwarded for Git commands
  # IdentityFile "C:\Users\RobertKCarroll\.ssh\id_github_standard"

  IdentityFile "C:\Users\RobertKCarroll\.ssh\id_ed25519_sk_u2f"
  IdentityAgent \\\\.\\pipe\\openssh-ssh-agent

  # Send a packet every 30 seconds to keep the NAT/Firewall open
  ServerAliveInterval 30
  ServerAliveCountMax 10

  # Automatically delete old socket files on the remote side upon reconnection
  StreamLocalBindUnlink yes

  # Enable Multiplexing
  # ControlMaster auto

  # # Path to the local socket (Windows uses a hidden file here)
  # ControlPath "C:\Users\RobertKCarroll\.ssh\S.%r@%h:%p"
  
  # Keep the "Master" connection alive for 4 hours after you close VS Code
  ControlPersist 4h